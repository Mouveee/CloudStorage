const node_openssl = require('../index.js');
var fs = require('fs');

var options = {
	//binpath: 'C:/Program Files/OpenVPN/bin/openssl.exe'
	binpath: 'C:/Program Files/OpenSSL-Win64/bin/openssl.exe'
}

var openssl = new node_openssl(options);

fs.readFile('./crazycert.cer', function(err, contents) {
	openssl.getCertInfo(contents.toString(), function(err, attrs, cmd) {
		if(err) {
			console.log(err);
		} else {
			openssl.getCertHash(contents.toString(), 'SHa256', function(err, hash, cmd) {
				if(err) {
					console.log(err);
				} else {
					console.log(attrs);
					console.log(hash);
				}
			});
			//console.log(openssl.getDistinguishedName(attrs.subject));
		}
	});
});

/*fs.readFile('./ra_csr.csr', function(err, contents) {
	openssl.getCSRInfo(contents.toString(), function(err, attrs, cmd) {
		if(err) {
			console.log(err);
		} else {
			console.log(attrs.extensions);
			//console.log(openssl.getDistinguishedName(attrs.subject));
		}
	});
});*/